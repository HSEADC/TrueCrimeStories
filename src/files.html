<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="./imgs/logoatlas.png" />
    <title>Case Atlas - Досье</title>
    <link rel="stylesheet" href="./stylesheets/style.css" />
  </head>
  <body class="files">
    <div class="custom-scrollbar"></div>
    <button class="menu-button" aria-label="Menu">
      <svg
        class="menu-icon"
        width="44"
        height="172"
        viewBox="0 0 44 172"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect
          x="0.5"
          y="36.5"
          width="43"
          height="99"
          rx="21.5"
          stroke="black"
        />
        <rect x="10" y="70" width="24" height="4" rx="2" fill="black" />
        <rect x="10" y="84" width="24" height="4" rx="2" fill="black" />
        <rect x="10" y="98" width="24" height="4" rx="2" fill="black" />
      </svg>
    </button>
    <div class="menu-backdrop"></div>
    <nav class="menu-panel" aria-label="Navigation menu">
      <a href="./index.html" class="menu-panel__button">
        <img src="./imgs/buttonmain.svg" alt="Главная" />
      </a>
      <a href="./about.html" class="menu-panel__button">
        <img src="./imgs/buttonaboutus.svg" alt="О нас" />
      </a>
      <a href="./files.html" class="menu-panel__button">
        <img src="./imgs/buttonfiles.svg" alt="Файлы" />
      </a>
      <a href="./newspaper.html" class="menu-panel__button">
        <img src="./imgs/buttonmagazine.svg" alt="Журнал" />
      </a>
      <a href="./podcasts.html" class="menu-panel__button">
        <img src="./imgs/buttonpodcast.svg" alt="Подкасты" />
      </a>
    </nav>
    <header class="files-header">
      <div class="files-header__container">
        <div class="files-header__search-section">
          <div class="search-input-wrapper">
            <svg
              class="search-icon"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.5 11.5L8.5 8.5M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5Z"
                stroke="black"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <input type="text" class="search-input" placeholder="" />
          </div>
          <div class="filter-tags">
            <span class="filter-tag">россия</span>
            <span class="filter-tag">сша</span>
            <span class="filter-tag">20 век</span>
            <span class="filter-tag">21 век</span>
            <span class="filter-tag">закрытые дела</span>
            <span class="filter-tag">непойманы</span>
            <button
              class="filter-tag filter-tag--clear"
              aria-label="Очистить фильтры"
            >
              <svg
                width="12"
                height="12"
                viewBox="0 0 12 12"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M9 3L3 9M3 3L9 9"
                  stroke="black"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
          </div>
        </div>
        <div class="files-header__logo">
          <span class="logo-text">CASE</span>
          <span class="logo-text">ATLAS</span>
        </div>
      </div>
    </header>
    <main class="files-main">
      <div class="file-card">
        <img src="./imgs/folder1.svg" alt="File folder" class="file-card__bg" />
        <div class="file-card__content">
          <div class="file-card__info">
            <div class="file-card__header">
              <div class="file-card__name-section">
                <h1 class="file-card__name">
                  <span class="name-line">ДЖЕФФРИ</span>
                  <span class="name-line">ДАМЕР</span>
                </h1>
                <div class="file-card__tags">
                  <span class="file-tag">сша</span>
                  <span class="file-tag">20 век</span>
                  <span class="file-tag">закрытые дела</span>
                </div>
              </div>
              <div class="file-card__birth-date">21. 05. 1960</div>
              <div class="file-card__text">
                <p>
                  Американский серийный убийца и сексуальный преступник,
                  действовавший в период с 1978 по 1991 год. На его счету 17
                  доказанных убийств молодых мужчин и подростков. Преступления
                  Дамера отличались крайней жестокостью: он расчленял тела,
                  занимался некрофилией и каннибализмом.
                </p>
              </div>
            </div>
          </div>
          <div class="file-card__photo">
            <img
              src="./imgs/picturedamer.svg"
              alt="Джеффри Дамер"
              class="photo-img"
            />
          </div>
        </div>
      </div>
    </main>
    <script>
      const menuButton = document.querySelector(".menu-button");
      let isOpen = true;

      const menuOpenSVG = `<svg class="menu-icon" width="44" height="172" viewBox="0 0 44 172" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="0.5" y="36.5" width="43" height="99" rx="21.5" stroke="black"/>
        <rect x="10" y="70" width="24" height="4" rx="2" fill="black"/>
        <rect x="10" y="84" width="24" height="4" rx="2" fill="black"/>
        <rect x="10" y="98" width="24" height="4" rx="2" fill="black"/>
      </svg>`;

      const menuClosedSVG = `<svg class="menu-icon" width="44" height="100" viewBox="0 0 44 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="0.5" y="0.5" width="43" height="99" rx="21.5" stroke="black"/>
        <rect width="29.5117" height="4.07058" rx="2.03529" transform="matrix(0.709577 0.704628 -0.709577 0.704628 12.8887 38.3369)" fill="black"/>
        <rect width="29.5117" height="4.07058" rx="2.03529" transform="matrix(-0.709577 0.704628 -0.709577 -0.704628 34 40.8682)" fill="black"/>
      </svg>`;

      const menuPanel = document.querySelector(".menu-panel");
      const menuBackdrop = document.querySelector(".menu-backdrop");

      menuButton.addEventListener("click", function () {
        const menuIcon = menuButton.querySelector(".menu-icon");
        if (isOpen) {
          menuIcon.outerHTML = menuClosedSVG;
          menuPanel.classList.add("menu-panel--open");
          menuBackdrop.classList.add("menu-backdrop--open");
          isOpen = false;
        } else {
          menuIcon.outerHTML = menuOpenSVG;
          menuPanel.classList.remove("menu-panel--open");
          menuBackdrop.classList.remove("menu-backdrop--open");
          isOpen = true;
        }
      });

      // Sync custom scrollbar with page scroll
      const customScrollbar = document.querySelector(".custom-scrollbar");
      if (customScrollbar) {
        function setupScrollbar() {
          let scrollContent = customScrollbar.querySelector(".scroll-content");
          if (!scrollContent) {
            scrollContent = document.createElement("div");
            scrollContent.className = "scroll-content";
            scrollContent.style.width = "1px";
            customScrollbar.appendChild(scrollContent);
          }
          const pageHeight = document.documentElement.scrollHeight;
          scrollContent.style.height = pageHeight + "px";
        }

        function syncScrollbar() {
          const scrollTop =
            window.pageYOffset || document.documentElement.scrollTop;
          const maxScroll =
            document.documentElement.scrollHeight - window.innerHeight;
          const scrollContent =
            customScrollbar.querySelector(".scroll-content");

          if (scrollContent && maxScroll > 0) {
            const scrollbarMaxScroll =
              scrollContent.offsetHeight - customScrollbar.offsetHeight;
            if (scrollbarMaxScroll > 0) {
              customScrollbar.scrollTop =
                (scrollTop / maxScroll) * scrollbarMaxScroll;
            }
          }
        }

        setupScrollbar();
        window.addEventListener("scroll", syncScrollbar);
        window.addEventListener("resize", function () {
          setupScrollbar();
          syncScrollbar();
        });

        setTimeout(syncScrollbar, 100);
        setTimeout(syncScrollbar, 500);
      }
    </script>
  </body>
</html>
